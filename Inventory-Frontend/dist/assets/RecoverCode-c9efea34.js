import{u as f,r as l,R as h,d as v,j as e,L as j,b as g,U as b}from"./index-583ba0dd.js";/* empty css                 */import{u as N}from"./index.esm-5dab2a19.js";function L(){const{otp:o,email:i}=f(),[n,c]=l.useState(!0),[d,a]=h.useState(60),u=v(),{register:s,handleSubmit:x,formState:{errors:y}}=N();function m(){n||g.post(`${b}api/recover/send_recovery_email`,{OTP:o,recipient_email:i}).then(()=>c(!0)).then(()=>alert("Un nuevo codigo ha sido enviado a tu correo.")).then(()=>a(60)).catch(alert("Tuvimos un error, intenta mas tarde."))}const p=t=>{parseInt(`${t.p0}${t.p1}${t.p2}${t.p3}`)==o?swal.fire("Codigo verificado correctamente","","success").then(()=>{u("/reset")}):swal.fire("Error, el codigo no coincide","","error")};return l.useEffect(()=>{let t=setInterval(()=>{a(r=>(r<=1&&clearInterval(t),r<=1&&c(!1),r<=0?r:r-1))},1e3);return()=>clearInterval(t)},[n]),e.jsx("div",{children:e.jsxs("div",{className:"my-5 text-center rounded verficationForm mx-auto",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{style:{fontWeight:"bolder"},children:e.jsx("strong",{children:"Verificación de email"})}),e.jsxs("p",{children:["Hemos enviado un correro a tu email ",i&&i]})]}),e.jsxs("form",{className:"d-flex flex-column justify-content-center align-items-center gap-2",onSubmit:x(p),children:[e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("div",{children:e.jsx("input",{maxLength:1,type:"text",...s("p0",{required:!0}),className:"form-control otpInput text-center"})}),e.jsx("div",{children:e.jsx("input",{maxLength:1,type:"text",...s("p1",{required:!0}),className:"form-control otpInput text-center"})}),e.jsx("div",{children:e.jsx("input",{maxLength:1,type:"text",...s("p2",{required:!0}),className:"form-control otpInput text-center"})}),e.jsx("div",{children:e.jsx("input",{maxLength:1,type:"text",...s("p3",{required:!0}),className:"form-control otpInput text-center"})})]}),e.jsx("div",{className:"w-100",children:e.jsx("button",{className:"btn btn-primary btn-block w-100",children:"Verificar cuenta"})})]}),e.jsxs("div",{className:"d-flex flex-row gap-2 ",children:[e.jsx("p",{children:"No recibiste un correo?"}),e.jsx(j,{className:"flex flex-row items-center",style:{color:n?"gray":"blue",cursor:n?"none":"pointer",textDecoration:"none"},onClick:()=>m(),children:n?`Reenviar código en ${d}s`:"Reenviar código"})]})]})})}export{L as default};
