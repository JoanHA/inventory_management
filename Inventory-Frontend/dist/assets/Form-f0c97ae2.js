import{j as e,c as v,d as N,r as f}from"./index-ff15ffff.js";import{u as j}from"./index.esm-928e4bdd.js";/* empty css            */import{s as y,a as C,d as w,c as E,e as k}from"./workers.controllers-385485ed.js";function B(){var n;const r=()=>{document.getElementById("modalPage").style.display="None"},{register:d,handleSubmit:c,reset:t,formState:{errors:x}}=j(),o=async h=>{const m=new FormData;m.append("file",h.file[0]);try{console.log("Carga masiva"),(await y(m)).status==200?swal.fire("Datos guardados","","success").then(()=>{t(),r()}):swal.fire("Lo sentimos algo salio mal","","error").then(()=>{t(),r()})}catch(u){console.log(u)}};return e.jsx("div",{className:"modalPage",id:"modalPage",children:e.jsx("div",{className:"card w-50 mx-auto px-4 py-4 rounded",children:e.jsx("form",{onSubmit:c(o),children:e.jsxs("div",{className:"form-group mx-auto py-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{children:"Carga Masiva de datos"}),e.jsx("label",{htmlFor:"",className:"mb-3",children:"Selecciona el archivo con los datos a subir..."}),e.jsx("div",{className:" text-center"})]}),e.jsxs("div",{className:"text-center d-flex flex-column mb-2 align-items-center",children:[((n=x.file)==null?void 0:n.type)=="required"&&e.jsx("p",{className:"errorMsg mb-0",children:"Este campo no puede ir vacio"}),e.jsx("input",{type:"file",className:"form-control mb-3",...d("file",{required:!0})}),e.jsx("p",{className:"errorMsg align-self-center",children:"Recuerda que debe ser un archivo excel (.xls)"})]}),e.jsxs("div",{className:"form-group text-center ",children:[e.jsx("button",{className:"btn btn-success mt-1",children:"Enviar"}),e.jsx("button",{className:"btn btn-danger mx-1 mt-1",type:"button",onClick:r,children:"Cancelar"})]})]})})})})}function F(){var p;const r=v(),d=N(),[c,t]=f.useState([]),x=()=>{document.getElementById("modalPage").style.display="Block"},{register:o,formState:{errors:n},handleSubmit:h,reset:m}=j();f.useEffect(()=>{const a=setTimeout(()=>{t(null)},3e3);return()=>{clearTimeout(a)}},[c]);const u=a=>{const s=async()=>{Swal.fire({title:"Estas seguro?",text:"Esta acción no se podrá revertir!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Guardar!"}).then(async l=>{if(l.isConfirmed)try{const i=await E(a);console.log(i.data),i.status==200&&swal.fire("Colaborador creado con exito!","","success").then(()=>{d("/Workers")})}catch(i){console.log(i),t(i.response.data)}})},b=async()=>{try{Swal.fire({title:"Estas seguro?",text:"Esta acción no se podrá revertir!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Editar!"}).then(async l=>{l.isConfirmed&&(await k(r.id,a)).status==200&&swal.fire("Colaborador editado con exito!","","success").then(()=>{d("/Workers")})})}catch(l){console.log(l),t(l.response.data)}};r.id?b():s()};f.useEffect(()=>{const a=async()=>{try{const s=await C(r.id);m({name:s.data[0].name,dni:s.data[0].dni,email:s.data[0].email,status:s.data[0].status,enroll_date:s.data[0].enroll_date.replaceAll("/","-"),branch:s.data[0].branch,area:s.data[0].area,occupation:s.data[0].occupation})}catch(s){console.log(s),t(s.response.data)}};r.id&&a()},[]);const g=async()=>{try{Swal.fire({title:"Estas seguro?",text:"Esta acción no se podrá revertir!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then(async a=>{if(a.isConfirmed){const s=await w(r.id);console.log(s.data),s.status==200&&swal.fire("Colaborador eliminado con exito!","","success").then(()=>{d("/Workers")})}})}catch(a){console.log(a),t(a.response.data)}};return e.jsxs("div",{className:"",children:[e.jsx(B,{}),e.jsxs("div",{className:"d-flex flex-column justify-content-center w-50 mx-auto py-3",children:[e.jsx("div",{children:e.jsx("h3",{children:e.jsxs("strong",{children:[r.id?"Editar":"Crear"," colaborador"]})})}),e.jsxs("div",{children:[(c==null?void 0:c.length)>0&&e.jsxs("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",children:[e.jsx("strong",{children:"Error"})," ",c]}),e.jsxs("form",{onSubmit:h(u),children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Identificación"}),e.jsx("input",{...o("dni",{required:!0}),type:"number",placeholder:" CC... ",className:"form-control form-control-sm"}),((p=n.nit)==null?void 0:p.type)=="required"&&e.jsx("div",{className:"errorMsg",children:"Este campo es requerido"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nombre completo"}),e.jsx("input",{...o("name",{required:!0}),type:"text",className:"form-control form-control-sm",placeholder:"Nombre..."}),n.name&&e.jsx("div",{className:"errorMsg",children:"Este campo es requerido"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Correo"}),e.jsx("input",{...o("email"),type:"email",className:"form-control form-control-sm",placeholder:"email@ejemplo..."}),n.email&&e.jsx("div",{className:"errorMsg",children:"Este campo es requerido"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cargo"}),e.jsx("input",{...o("occupation"),type:"text",className:"form-control form-control-sm",placeholder:"Mensajero, analista..."}),n.email&&e.jsx("div",{className:"errorMsg",children:"Este campo es requerido"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Estado"}),e.jsxs("select",{id:"",className:"form-select  form-select-sm",...o("status"),children:[e.jsx("option",{value:"1",children:"Activo"}),e.jsx("option",{value:"2",children:"Inactivo"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"fecha de ingreso"}),e.jsx("input",{...o("enroll_date",{required:!0}),type:"date",className:"form-control form-control-sm"}),n.enroll_date&&e.jsx("div",{className:"errorMsg",children:"Este campo es requerido"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Sede"}),e.jsx("input",{...o("branch"),type:"text",className:"form-control form-control-sm",placeholder:"Cali, Bogota..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Area"}),e.jsx("input",{...o("area"),type:"text",className:"form-control form-control-sm",placeholder:"Logistica,IT, Mercadeo.."})]}),e.jsx("div",{className:"my-2",children:r.id?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-success btn-sm",children:"Editar"}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm mx-1",onClick:g,children:"Borrar"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-success btn-sm ",children:"Agregar"}),e.jsx("button",{className:"btn btn-dark btn-sm mx-2",onClick:x,type:"button",children:"Carga masiva"})]})})]})]})]})]})}export{F};
